{% docs psa_project_forecast %}

# Project Forecast PSA 2.0

## Purpose

The Project Forecast is a report that exists in the Upland/Tenrox platform. The report is built in Snowflake as a table using the Tenrox source tables as part of PSA2.0 initiative.


Tenrox is a 3rd party tool used by Consulting team to log activities and keep track of their projects. From Tenrox, important financial decisions are also taken like for instance Revenue Generated by consulting activities, booked activities, commissions, and more. For this reason, Consulting data surfaced from Tenrox is expecially crucial for ECS Finance and the whole GCD Organization, but it also has an impact on CSMs when it comes to calculate the impact of consulting activities into Growth. 


The Project Forecast report shows the following:
1. Actual Hours and Forecasted Hours by Quarter.
2. Percent of Compplete by Quarter for the projects.
3. Tracking the progress of hours delivered versus budget hours, based on expiration dates.
4. Budget Revenue of the projects.
5. Revenue by Quarter of the projects.



## How to Use the Data

The data or the table is built using the various fucntions based on the current iteration of PSA.

### Sample data
| DT                           | PROJECT_ID | PARENT_ID | ADSK_GEO_NAME | PORTFOLIO_NAME         | PROJECT_CODE                    | PROJECT_NAME                                             | PROJECT_MANAGER_NAME | PROJECT_STATE | PROJECT_END_DATE | ... | HARD_BOOKED_HRS_ADDITIONAL2QTR | SOFT_BOOKED_HRS_ADDITIONAL2QTR | ACTUAL_EXPENSES_PASTQTR | ... | TOTAL_REVENUE_PLUS5QTR | HARD_BOOKED_REV_PLUS5QTR | SOFT_BOOKED_REV_PLUS5QTR | TOTAL_REVENUE_ADDITIONALQTR | HARD_BOOKED_REV_ADDITIONALQTRS | SOFT_BOOKED_REV_ADDITIONALQTRS | TOTAL_REVENUE_ADDITIONAL2QTR | HARD_BOOKED_REV_ADDITIONALQTRS2 | SOFT_BOOKED_REV_ADDITIONALQTRS2 | TOTAL_REVENUE_FUTUREQTRS | PARENT_CHILD_KEY |
| ---------------------------- | ---------- | --------- | ------------- | ---------------------- | ------------------------------- | ------------------------------------------------------- | --------------------- | ------------- | ---------------- | --- | ----------------------------- | ----------------------------- | ----------------------- | --- | ----------------------- | ------------------------ | ------------------------ | --------------------------- | ----------------------------- | ----------------------------- | ----------------------------- | ----------------------------- | ----------------------------- | -------------------------- | ---------------- |
| 2023-07-26 09:41:54.649 +0000 | 694        | 3         | AMER          | Jim McNicol            | NONE                            | Cameron-Vault Cleanup Change Order                     | Mark Engle            | Closed        | 30/05/2013       | ... | 0                             | 0                             | 0                       | ... | 0                       | 0                        | 0                        | 0                           | 0                             | 0                             | 0                             | 0                             | 0                             | 0                          | 694              |
| 2023-07-26 09:41:54.649 +0000 | 7392       | 3         | EMEA          | zzzEMEA-Nordic/BNL      | R-DURA-00100-SCO04              | Dura Vermeer-PA-2016-2018 (SCO04), 4D Simulation project | Khaled Tawfique       | Closed        | 31/12/2017       | ... | 159.5                         | 159.5                         | 0                       | ... | 0                       | 0                        | 0                        | 0                           | 0                             | 0                             | 0                             | 0                             | 0                             | 0                          | 7392             |
| 2023-07-26 09:41:54.649 +0000 | 1535       | 3         | EMEA          | Driss Yammouri         | A-0751560                       | BRVZ - Vault Pilot and Roll-out                         | Christian Wichmann    | Closed        | 27/11/2737       | ... | 0                             | 0                             | 0                       | ... | 0                       | 0                        | 0                        | 0                           | 0                             | 0                             | 0                             | 0                             | 0                             | 0                          | 1535             |
| 2023-07-26 09:41:54.649 +0000 | 7915       | 3         | APAC          | Hidekazu Tetsuzaki     | R-NIHO-00400-SCO6                | Nihon Sekkei-EBA Add-2016-2018 (SCO6)-Archibus Consulting Phase-2 | Shunichi Tsuchiya     | Closed        | 28/02/2017       | ... | 97.5                          | 97.5                          | 0                       | ... | 0                       | 0                        | 0                        | 0                           | 0                             | 0                             | 0                             | 0                             | 0                             | 0                          | 7915             |
| 2023-07-26 09:41:54.649 +0000 | 7315       | 3         | AMER          | ZZZ_AMER-Martin        | R-CFEL-00200-SCO4                 | Comision Federal de Electricidad-EBA-2016-2019 (SCO4) - CFD Consulting | Rich Recker           | Closed        | 31/12/2016       | ... | 28                            | 28                            | 0                       | ... | 0                       | 0                        | 0                        | 0                           | 0                             | 0                             | 0                             | 0                             | 0                             | 0                          | 7315             |
| 2023-07-26 09:41:54.649 +0000 | 6740       | 3         | AMER          | ZZZ_AMER-Martin        | R-CFEL-002


### Caveats and Observations

A few changes and observations on the dataset are as follows:

1. The PROJECT_ID and the PROJECT_CODE, shows the ID and the CODE for the resective the projects,
is the unique key for the dataset.

2. The Billable EAC Hours is taken as the following:

    ```
    Actual billable hours < start of current week + billable forecast (future) hours >= start of current week  
    ```

The week is defined as Sunday â€“ Saturday.


2. The formula for Perecent of Complete (POC) is :

    ```
    (SUM of Actual Billable Hours (until last week) + SUM of Billable Forecasted Hours (from last week)) /  Billable Hour EAC
    ```
    The week is defined as Sunday - Monday

3. The POC and Revenue for IS projects is reported on its parent project using:

    1. Actual billable approved hours rolled up from the children  

    2. Forecasted billable hours rolled up from the children + forecasted billable hours on the parent  

4. The PARENT_CHILD_KEY ties up the IS projects to its parent IS project, where as the PARENT_ID represents the parent project ID of the projects.

5. The ADKS_GEO_NAME for any aprent child proejcts is reported based on its parent project.


## Test Cases

### Singular Tests
1. NULL - PROJECT_ID, PROJECT_CODE, ADSK_MASTER_AGREEMENT_PROJECT_TYPE
2. UNIQUE - PROJECT_ID, PROJECT_CODE

```
tnrxsp_project_forecast_unique_projectid
tnrxsp_project_forecast_null_projectid
tnrxsp_project_forecast_unique_projectcode
tnrxsp_project_forecast_null_projectcode
tnrxsp_project_forecast_null_projecttype

```
### Generic Tests
1. POC for all Quarters do not exceed 1.
2. Total Revenue is SUM of Hard and Soft Booked Revenues.
 
 ```
tnrxsp_project_forecast_greaterthanone_pocprevqtr
tnrxsp_project_forecast_greaterthanone_pocpcurrentqtr
tnrxsp_project_forecast_greaterthanone_pocplus1qtr
tnrxsp_project_forecast_greaterthanone_pocplus2qtr
tnrxsp_project_forecast_greaterthanone_pocplus3qtr
tnrxsp_project_forecast_greaterthanone_pocplus4qtr
tnrxsp_project_forecast_greaterthanone_pocpplus5qtr
tnrxsp_project_forecast_greaterthanone_pocadditionalqtr
tnrxsp_project_forecast_greaterthanone_pocadditional2qtr
tnrxsp_project_forecast_totalrevenue_currentqtr
```



## Data Sources

| Data Warehouse | Schema                         | View/Table                             |
| -------------- | ------------------------------ | -------------------------------------- |
| Snowflake      | EIO_PUBLISH.TENROX_PRIVATE     | TPROJECT                               |
| Snowflake      | EIO_PUBLISH.TENROX_PRIVATE     | TWORKFLOWMAP                           |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_ACT_CHARGE_COSTS_V02_LOCAL_CUR |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_MONTHLY_CHRG_REV_LOCAL_CUR     |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_REC_REV_V02                    |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_REC_CHRG_REV_V02_LOCAL_CUR     |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | FCURRQEXCHRATE                         |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_FORECAST_CHRG_COST_LOCAL_CUR   |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_LABOR_REV_V02_LOCAL_CUR        |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_PROJECT_BUDGET_LOCAL_CUR       |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_LABOR_HRS_V02                  |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_FORECAST_CHRG_REV_V02_LOCAL_CUR|
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_MONTH_Q_RANGES_V02                |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | ADSK_CM_PROJECT_DETAILS                |
| Snowflake      | EIO_INGEST.TENROX_TRANSFORM    | TPROJECTCUSTFLD_VIEW                   |


## Output Table

Warehouse : EIO_PUBLISH.ENGAGEMENT_PRIVATE
Table Name: PROJECT_FORECAST

|Column Name|Defintion|
|:----|:----|
|DT| Timestamp value- to check for data freshness|
|PROJECT_ID| Unique ID of the projects |
|PARENT_ID| ID of the parent projects - Used to identify the parent projects for the child projects|
|ADSK_GEO_NAME| GEO value of the projects|
|PORTFOLIO_NAME| Portfolio of the projects |
|PROJECT_CODE| Unique code for the projects|
|PROJECT_NAME| Name of the projects|
|PROJECT_MANAGER_NAME| Project Manager for the respective projects|
|PROJECT_STATE| Status of the projects - Closed, Active, Funnel etc|
|PROJECT_END_DATE| End date of the Projects|
|ADSK_SAP_PROJECT_ID| SAP ID for the projects |
|CLIENT_NAME| Client or the Account name to which the project corressponds to.|
|ADSK_MASTERAGREEMENT_PROJECTTYPE| Project Type of the projects - IS Parent ,AS Parent ,PAC Parent ,PAC Child (SCO) ,DSP Parent ,Cash  |
|CLIENT_CURRENCY| The project currency |
|CLIENT_RATE| Rate of the project currency |
|BASE_RATE| Conversion rate towards USD|
|HOURLY_RATE_CONTRACTCURRENCY| Hourly rate for the project in local currency|
|HOURLY_RATE_USD| Hourly rate in USD|
|BUD_REVENUE| Budget Revenue of the projects|
|REVLABOR_PASTQTRS| Labor revenue for Previous Quarter|
|REVLABOR_CURRENTQTR| Labor revenu for current quarter|
|REV_DEFERRED| Deffered Revenue for the currente quarter|
|REVLABOR_REMAINING_IN_QTR| Total Labor revenue remaining in current quarter|
|REVLABOR_REMAINING_IN_QTR_HARD| Hard booked labor revenue remaining in current quarter|
|REVLABOR_PLUS1QTR| Total Labor revenue in next quarter |
|REVLABOR_PLUS2QTR| Total Labor revenue in next quarter + 1|
|REVLABOR_PLUS3QTR| Total Labor revenue in next quarter + 2|
|REVLABOR_PLUS4QTR| Total Labor revenue in next quarter + 3|
|REVLABOR_PLUS5QTR| Total Labor revenue in next quarter + 4|
|REVLABOR_ADDITIONALQTRS| Total Labor revenue in additional quarter |
|REVLABOR_ADDITIONALQTRS2| Total Labor revenue in additional quarter +1|
|HARD_BOOKED_HRS_CURRENTQTR| Hard booked Hours for current quarter|
|SOFT_BOOKED_HRS_CURRENTQTR| Soft booked Hours for current quarter|
|HARD_BOOKED_HRS_PLUS1QTR| Hard booked Hours for next quarter|
|SOFT_BOOKED_HRS_PLUS1QTR| Soft booked Hours for next quarter|
|HARD_BOOKED_HRS_PLUS2QTR| Hard booked Hours for next quarter + 1 |
|SOFT_BOOKED_HRS_PLUS2QTR| Soft booked Hours for next quarter + 1 |
|HARD_BOOKED_HRS_PLUS3QTR| Hard booked Hours for next quarter + 2|
|SOFT_BOOKED_HRS_PLUS3QTR| Soft booked Hours for next quarter + 2|
|HARD_BOOKED_HRS_PLUS4QTR| Hard booked Hours for next quarter + 3|
|SOFT_BOOKED_HRS_PLUS4QTR| Soft booked Hours for next quarter + 3|
|HARD_BOOKED_HRS_PLUS5QTR| Hard booked Hours for next quarter + 4|
|SOFT_BOOKED_HRS_PLUS5QTR| Soft booked Hours for next quarter + 4|
|HARD_BOOKED_HRS_ADDITIONALQTRS| Hard booked Hours for additional quarters|
|SOFT_BOOKED_HRS_ADDITIONALQTRS| Soft booked Hours for additional quarters|
|HARD_BOOKED_HRS_ADDITIONALQTRS2| Hard booked Hours for additional quarters + 1|
|SOFT_BOOKED_HRS_ADDITIONALQTRS2| Soft booked Hours for additional quarters + 1|
|HRSACT_PAST| Actual Hours for past quarters|
|HRSACT_PASTQTRS| Actual Hours for past quarter|
|HRSACT_CURRENTQTR| Actual Hours Current Quarter|
|HRS_BILLABLE_EAC| Billable Hours Estimated at Completion|
|PERCENT_COMPLETE_PREVQTR| Perecent of Completion (POC) for Previous Quarter|
|PERCENT_COMPLETE_CURRENTQTR| Perecent of Completion (POC) for Current Quarter|
|PERCENT_COMPLETE_PLUS1QTR| Perecent of Completion (POC) for Current Quarter + 1|
|PERCENT_COMPLETE_PLUS2QTR| Perecent of Completion (POC) for Current Quarter + 2|
|PERCENT_COMPLETE_PLUS3QTR| Perecent of Completion (POC) for Current Quarter + 3|
|PERCENT_COMPLETE_PLUS4QTR| Perecent of Completion (POC) for Current Quarter + 4 |
|PERCENT_COMPLETE_PLUS5QTR| Perecent of Completion (POC) for Current Quarter + 5|
|PERCENT_COMPLETE_ADDITIONALQTR| Perecent of Completion (POC) for Additional Quarter|
|PERCENT_COMPLETE_ADDITIONAL2QTR| erecent of Completion (POC) for Additional Quarter + 1|
|TOTAL_REVENUE_PREVQTR| Total revenue for Previous Quarter|
|TOTAL_REVENUE_CURRENTQTR| Total revenue for Current Quarter |
|HARD_BOOKED_REV_CURRENTQTR| Hard Booked revenue for Current Quarter|
|SOFT_BOOKED_REV_CURRENTQTR| Soft Booked revenue for Current Quarter|
|TOTAL_REVENUE_PLUS1QTR| Total revenue for Current Quarter + 1|
|HARD_BOOKED_REV_PLUS1QTR| Hard Booked revenue for Current Quarter + 1|
|SOFT_BOOKED_REV_PLUS1QTR| Soft BooBookedekd revenue for Current Quarter + 1|
|TOTAL_REVENUE_PLUS2QTR| Total revenue for Current Quarter + 2|
|HARD_BOOKED_REV_PLUS2QTR| Hard Booked revenue for Current Quarter +2|
|SOFT_BOOKED_REV_PLUS2QTR| Soft Booked revenue for Current Quarter +2|
|TOTAL_REVENUE_PLUS3QTR| Total revenue for Current Quarter + 3|
|HARD_BOOKED_REV_PLUS3QTR| Hard Booked revenue for Current Quarter + 3|
|SOFT_BOOKED_REV_PLUS3QTR| Soft Booked revenue for Current Quarter + 3|
|TOTAL_REVENUE_PLUS4QTR| Total revenue for Current Quarter + 4|
|HARD_BOOKED_REV_PLUS4QTR| Hard Booked revenue for Current Quarter + 4|
|SOFT_BOOKED_REV_PLUS4QTR| Soft Booked revenue for Current Quarter + 4|
|TOTAL_REVENUE_PLUS5QTR| Total revenue for Current Quarter + 5|
|HARD_BOOKED_REV_PLUS5QTR| Hard Booked revenue for Current Quarter + 5|
|SOFT_BOOKED_REV_PLUS5QTR| Soft Booked revenue for Current Quarter + 5|
|TOTAL_REVENUE_ADDITIONALQTR| Total revenue for Additional Quarter |
|HARD_BOOKED_REV_ADDITIONALQTRS| Hard Booked revenue for Additonal Quarter|
|SOFT_BOOKED_REV_ADDITIONALQTRS| Soft Booked revenue for Additonal Quarter|
|TOTAL_REVENUE_ADDITIONAL2QTR| Total revenue for Additional Quarter + 1|
|HARD_BOOKED_REV_ADDITIONALQTRS2| Hard Booked revenue for Additional Quarter + 1|
|SOFT_BOOKED_REV_ADDITIONALQTRS2| Soft Booked revenue for Additional Quarter + 1|
|TOTAL_REVENUE_FUTUREQTRS| Total revenue for Future Quarter |
|PARENT_CHILD_KEY| Parent Child key to tie up Child projects to its Parent Projects |



## Access pattern

To access the tables, please fill out an [ADP request form](https://autodesk.service-now.com/helphub?id=evg_sc_cat_item&sys_id=0523ce01dbc9bc503bb20825ca9619d1), requesting for the role EIO_ENGAGEMENT_READONLY

Request Type: 'Other Snowflake Privileges'

Tenant: 'EIO'

Request Details: Insert business purpose here and please add role EIO_ENGAGEMENT_READONLY.

Load Frequency : Daily

{% enddocs %}